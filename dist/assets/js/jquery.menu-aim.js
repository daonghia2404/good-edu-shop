!function(e){e.fn.menuAim=function(t){return this.each(function(){(function(t){var n=e(this),i=null,o=[],u=null,r=null,c=e.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:e.noop,exit:e.noop,activate:e.noop,deactivate:e.noop,exitMenu:e.noop},t),l=function(e){e!=i?(i&&c.deactivate(i),c.activate(e),i=e):c.activate(e)},a=function(e){var t=f();t?r=setTimeout(function(){a(e)},t):l(e)},f=function(){if(!i||!e(i).is(c.submenuSelector))return 0;var t=n.offset(),r={x:t.left,y:t.top-c.tolerance},l={x:t.left+n.outerWidth(),y:r.y},a={x:t.left,y:t.top+n.outerHeight()+c.tolerance},f={x:t.left+n.outerWidth(),y:a.y},s=o[o.length-1],h=o[0];if(!s)return 0;if(h||(h=s),h.x<t.left||h.x>f.x||h.y<t.top||h.y>f.y)return 0;if(u&&s.x==u.x&&s.y==u.y)return 0;function m(e,t){return(t.y-e.y)/(t.x-e.x)}var x=l,v=f;"left"==c.submenuDirection?(x=a,v=r):"below"==c.submenuDirection?(x=f,v=a):"above"==c.submenuDirection&&(x=r,v=l);var y=m(s,x),p=m(s,v),b=m(h,x),d=m(h,v);return y<b&&p>d?(u=s,300):(u=null,0)};n.mouseleave(function(){r&&clearTimeout(r);c.exitMenu(this)&&(i&&c.deactivate(i),i=null)}).find(c.rowSelector).mouseenter(function(){r&&clearTimeout(r);c.enter(this),a(this)}).mouseleave(function(){c.exit(this)}).click(function(){l(this)}),e(document).mousemove(function(e){o.push({x:e.pageX,y:e.pageY}),o.length>3&&o.shift()})}).call(this,t)}),this}}(jQuery);